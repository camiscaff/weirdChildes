---
title: "SM WEIRD CHILDES SHORT"
author: "Camila Scaff, minor update Alex"
date: "2024-08-15"
output:
  word_document: default
  pdf_document: default
---

---
title: "Supplementary Materials WEIRD CHILDES"
output:
  pdf_document:
    toc: yes
    toc_depth: 2
    extra_dependencies: ["float"]
  html_document:
    toc: yes
    toc_depth: '2'
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,warning = FALSE, message = FALSE)

```

```{r libraries, message=FALSE, warning=FALSE}

#Load libraries
library(papaja)
library(ggplot2)
library(dplyr)
library(tidyr)
library(purrr)
require(scales)
library(stringr)
library(kableExtra)
library(ggpubr)
library(plotly)
library(GGally)
library(ggthemes)
library(rjson)
library(RColorBrewer)
myPalette <- brewer.pal(5, "Set2") 


group_count <-function(data_, column_){
data_<- data_ %>%
  group_by({{column_}}) %>%
    count() 
      return(data_)
}

group_select<-function(data_, column_){
data_ <- data_%>%
    group_by(!!column_) %>%
      select(Corpus, !!column_)
data_ <- data_[ order( data_[,3] ),]
return(data_)
}

#Load datasets
annotations_inc<- read.csv("../derived/annotations_included", sep="")
ind<- read.csv("../derived/ind", sep="")
ind_all<- read.csv("../derived/ind_all", sep="")
ocde <- read.csv("../data/ocde_country.csv", sep=",")


##countries and corpora
corpora <- as.data.frame((table(annotations_inc$country)))
names(corpora)<-c("country","Freq")
#write.table(corpora,"derived/corpora", row.names = FALSE, col.names = TRUE)


merge(x=corpora, y=ocde,  by = "country", all.x = T) -> ocde_country

annotations<- read.csv("../data/Table for authors - annotations.csv") 
#original link https://docs.google.com/spreadsheets/d/1s-ytfQf7WsZFDDZ6QkOQnZhTodHpQp7D2Wja8YFvjQY/edit?usp=sharing

#some cleaning  of the col names
colnames(annotations)=gsub("\\.\\..*","",colnames(annotations))
colnames(annotations)[colnames(annotations)=="Number.of.participants"]<-"Nb.of.participants"
colnames(annotations)[colnames(annotations)=="Language.or.Languages.spoken.in.recordings..be.specific.if.possible.e.g..French.Quebec."]<-"Language"
colnames(annotations)[colnames(annotations)=="Language.or.Languages.spoken.in.recordings..be.specific.if.possible.e.g..French.Quebec."]<-"Language"
colnames(annotations)[colnames(annotations)=="Location..Neighbourhood..village.city..province..state..country."]<-"Location"
colnames(annotations)[colnames(annotations)=="X..of.children.with.siblings"]<-"Nb.of.children.with.siblings"
colnames(annotations)[colnames(annotations)=="X..of.children.with.older.siblings"]<-"Nb.of.children.with.older.siblings"
colnames(annotations)[colnames(annotations)=="Our.coding.of"]<-"Our.coding.of.community.type"

#Inclusion
annotations$Inclusion[annotations$Inclusion %in% c("No","no")] <- "exclude"
annotations$Inclusion[annotations$Inclusion %in% c("Yes","yes")] <- "include"
#why_exclude
excluded <-  subset(annotations, (Inclusion %in% c("exclude")))
#xtabs(~why_exclude, excluded)



```


## SM1: Sources used for Figure 2


The goal of this figure is to represent the representativeness of countries in our sample of CHILDES against distributions across all countries in the world. 
For the SES dimension we choose two measures representing education and income. For the education measure, we turned to Our World in Data (WDI), an organization that collates information from various official sources. We downloaded information on the proportion of the population that had completed lower secondary school (data from 2007-2015; Our World in Data, 2022a). For the income measure, we relied on the World Development Indicators (WDI) from the World Bank, available via the WDI package in R (Vincent Arel-Bundock, 2021). We choose the Gross Domestic Product (GDP) per capita (based on log 10), a measure that represents how relatively rich countries are based on 2017 US dollars purchasing power parity. 
For the urbanization measure, we used the percentage of the population living in urban areas indicator, from the WDI from the World Bank. It represents the proportion of the population that was rural, so we estimated the complement to 100% to conceptually align this variable to the others. We employed indicators for the year 2022 because this was the year in which we had the maximum amount of data available for those variables. 
For family structure we used the household size from the UN database on Household Size and Composition 2022 (data from 2000-2022 United Nations, 2022). First, the average number of household members

## SM2: The SES of families in our sample of CHILDES is not reasonable given source countries
As mentioned in the main text, the vast majority of families were of middle or higher SES. Since 84% of corpora were collected in OECD countries, we use OECD data for comparison. While less than 66% of families in OECD countries are middle-to-high SES, over 80% of our sample falls into this category. Moreover, OECD countries generally have higher SES populations compared to the global average, suggesting that our CHILDES sample likely overrepresents middle-to-high SES families even more on a global scale.


## SM3: The education of caregivers in our sample of CHILDES is not reasonable given source countries


```{r}
read.csv("../share-of-the-population-with-completed-tertiary-education-OWID-20220217.csv")->college
college<-subset(college,Year == 2010 & Entity %in% levels(factor(annotations_inc[!is.na(annotations_inc$Education.ac),"country"])))

with_ed = subset(annotations_inc, !is.na(Education.ac))

#we want to get a table with the % of corpora by country for matching with the country-level info below

ed_tab = table(with_ed$country,with_ed$Education.ac=="College and above")

ed_tab_pc<-ed_tab[,2]/rowSums(ed_tab)


ed_tab_pc=ed_tab_pc[names(ed_tab_pc)%in%college$Entity]
#check: names(ed_tab_pc)==college$Entity
ed_tab_joint <- cbind(ed_tab_pc,college[,4])
colnames(ed_tab_joint)<-c("pc_corpora","pc_population")
#plot(ed_tab_joint)
#ed_tab_joint[order(ed_tab_joint[,"pc_corpora"]),]
```

To check whether the levels of education were reasonable, we calculated the proportion of corpora in each country for which all caregivers had completed college, setting aside the corpus collected in two countries, for a total of 27 countries. This percentage varied between 0 (Greece, Lesotho, Serbia, or Portugal) and 100% (for 16 countries). In contrast, for the same 27 countries, the proportion of the population aged 25-65 years with completed tertiary education did not go above 30% (data from 2010). Zooming into one particular case, 100% of families in the corpora collected in the United States had a college education or higher, which is true of only 36% of US adults (U.S. Census Bureau, 2020).  

Professions linked with graduate level education include: Master's or Ph.D. students, professors, linguists, researchers, scientists, and academics. If we additionally count psychologists and speech therapists, this represents 62% of the corpora. In fact, 50% of the samples contained parents who were described as (Masters or PhD) students, professors, linguists, researchers, scientists, or academics. To give an idea of the extent to which this is not representative, consider the fact that in 2020, 6% of the American population would be included in that list of professions. Similar data is hard to find for all countries represented in CHILDES, but we suspect that the proportion of scientists, professors, Masters and PhD students found in most other countries will be the same or lower.

## SM4: The number of corpora in our sample of CHILDES with urban versus rural families is reasonable given source countries

This indicator is based in the World Bank staff estimates based on the United Nations Population Division's World Urbanization Prospects: 2018 Revision.

```{r tab4,echo = FALSE, as.is=T, ig.pos = "T!",results="asis"}
annotations_inc$Type.of.community[annotations_inc$Type.of.community %in% c("academic","capital city of the Soviet Union","city","industial","industrial ","work-for-pay",
                                                                                                        "work-for-pay/industrial","industrial","Northeastern US urban","urban western", "industrial & service &trade activities...", "Mediterranean city of 1.6 million inhabitants", "modern city families, usually both working parents","Seaside tourist town","Industrial city (population: around 272,000 inhabitants)","mainly urban", "industrial city (3.000.000 inhabitants")]<-"urban"

annotations_inc$Type.of.community[annotations_inc$Type.of.community %in% c("farmer","rural","rural farming village")]<-"rural"
annotations_inc$Type.of.community[annotations_inc$Type.of.community %in% c("industrial, farmers")]<-"both"
annotations_inc$Type.of.community = factor(annotations_inc$Type.of.community, levels=c("urban", "both", "rural"))

with_rur<-annotations_inc[!is.na(annotations_inc$Type.of.community),]

## Read in urbanization info
#from WDI https://api.worldbank.org/v2/en/indicator/SP.RUR.TOTL.ZS?downloadformat=csv
read.csv("../data/macro_level_measures/urban.csv")->urbtot

## select only 2022 urbanization data
urbtot_2022 <- urbtot[, c("Country.Name", "Country.Code", "Indicator.Name", "Indicator.Code", "X2022")]
urbtot_2022 <- urbtot_2022[, c("Country.Name", "Country.Code", "X2022")]
colnames(urbtot_2022)[colnames(urbtot_2022) == "X2022"] <- "SP.RUR.TOTL.ZS"
100 - urbtot_2022$SP.RUR.TOTL.ZS -> urbtot_2022$SP.URB.TOTL.ZS
urbtot_2022 <- urbtot_2022[, c("Country.Name", "Country.Code", "SP.URB.TOTL.ZS")]

#subset to countries that have community type data
urbtot_2022=subset(urbtot_2022,Country.Code%in% levels(factor(with_rur$alpha.3)))

#now work towards a table with the key info
urb_tab = table(with_rur$alpha.3,with_rur$Type.of.community=="urban")
urb_tab_pc<-urb_tab[,2]/rowSums(urb_tab)
urb_tab_pc=urb_tab_pc[urbtot_2022$Country.Code]

urb_tab_joint <- cbind(urb_tab_pc,urbtot_2022[,3])
colnames(urb_tab_joint)<-c("pc_corpora","pc_population")
#plot(urb_tab_joint)
#urb_tab_joint[order(urb_tab_joint[,"pc_corpora"]),]
#table(urb_tab_joint[,"pc_corpora"])
#range(urb_tab_joint[,"pc_population"])
#urb_tab_joint[order(urb_tab_joint[,"pc_population"]),]
#range(urb_tab_joint[urb_tab_joint[,"pc_corpora"]==1,"pc_population"])
#range(urb_tab_joint[urb_tab_joint[,"pc_corpora"]!=1,"pc_population"])
```


To check whether the levels of urban sampling were reasonable, we calculated the proportion of corpora in each country for which all families were urban, setting aside the corpus collected in two countries, for a total of 26 countries. This percentage varied between (Jamaica, Lesotho, Papua New Guinea) and 100% (for 20 countries). For the same 26 countries, the proportion of the population that was urban varied more continuously, ranging from 14 (Papua New Guinea) to 100% (Kuwait). Among the 20 countries for which 100% of families were urban, this percentage varied between 43 and 100%. For the remaining 6 countries, it went from 14 to 83%.

## SM5: Singletons are underrepresented in our sample of CHILDES given source countries

```{r}
annotations_inc$siblings[annotations_inc$Nb.of.children.with.siblings != 0] <- "yes"
annotations_inc$siblings[annotations_inc$Nb.of.children.with.siblings == 0] <- "no"
annotations_inc$siblings[annotations_inc$Nb.of.children.with.siblings %in% c("all firstborn (some newborn sibs)", "at least 1 (triplet)")] <- "yes"
annotations_inc$siblings = factor(annotations_inc$siblings, levels=c("yes", "no"))

with_sib<-subset(annotations_inc,!is.na(siblings))
with_sib$singleton<-with_sib$siblings=="no"

read.csv("../children-born-per-woman-OWID-20220112.csv")->cpw
cpw[cpw$Year==2011,]->cpw
colnames(cpw)[colnames(cpw)=="Fertility.rate..Select.Gapminder..v12...2017."]<-"Fertility"
cpw=subset(cpw,Entity %in% levels(factor(annotations_inc$country)))

sib_tab = table(with_sib$country,with_sib$singleton)
sib_tab_pc<-sib_tab[,2]/rowSums(sib_tab)
sib_tab_pc=sib_tab_pc[cpw$Entity]

sib_tab_joint <- cbind(sib_tab_pc,cpw[,4])
colnames(sib_tab_joint)<-c("pc_corpora","fertility_rate")
#plot(sib_tab_joint)
table(sib_tab_joint[,"pc_corpora"])
range(sib_tab_joint[sib_tab_joint[,"pc_corpora"]==0,"fertility_rate"])

range(urb_tab_joint[urb_tab_joint[,"pc_corpora"]!=1,"pc_population"])
```


## SM6: Languages represented

```{r lang_dif,echo = FALSE, as.is=T, ig.pos = "T!",results="asis"}

annotations_inc$Language[annotations_inc$Language == "Catalan/Spanish"] <- "Spanish/Catalan"
annotations_inc$Language[annotations_inc$Language == "Spanish/English"] <- "English/Spanish"

levels(as.factor(annotations_inc$Language))

# mytab4 <- data.frame(
#   Monolingual_Language = c("Afrikaans", "Arabic (Egyptian or Kuwaiti)", "Basque", "Cantonese", "Catalan", "Cree", "Croatian", "Czech", "Danish", "Dutch", "English", "Estonian", "Farsi", "French", "German", "Greek", "Hebrew", "Hungarian", "Icelandic", "Indonesian", "Irish", "Italian", "Jamaican", "Japanese", "Korean", "Mandarin", "Norwegian", "Nungon", "Polish", "Portuguese (Brazilian or European)", "Romanian", "Russian", "Serbian", "Sesotho", "Slovenian", "Spanish", "Swedish", "Taiwanese", "Tamil", "Thai", "Turkish", "Welsh"),
#   Total_Participants = c(2, 80, 46, 8, 17, 1, 3, 6, 2, 23, 210, 32, 5, 46, 46, 6, 122, 8, 1, 8, 7, 8, 2, 148, 4, 157, 11, 5, 4, 9, 6, 2, 8, 4, 20, 75, 9, 4, 1, 18, 1, 475),
#   Multilingual_Languages = c("Dutch/English, Dutch/French", "Dutch/Italian", "Spanish/Catalan", "Spanish/Galician", "English/Cantonese", "English/French", "English/Hebrew", "English/Japanese", "English/Japanese/Danish", "English/Mandarin", "English/Mandarin/Cantonese", "English/Russian", "English/Spanish", "French/Russian", "Hungarian/Catalan/Spanish", "Hungarian/Farsi/English", "German/Spanish", "Italian/Japanese", "Italian/German", "Portuguese/Swedish/English", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA),
#   Total_Participants_Multilingual = c(35, 4, 6, 66, 9, 12, 1, 1, 1, 55, 11, 22, 12, 1, 1, 2, 9, 1, 2, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)
# )


#apa_table(mytab,caption="Total number of participants per language,", longtable = T, align=c("lccccccccr"))
```

## SM7: Monolinguals are over-represented given source countries


## SM8:  Acknowledgments

We would like to thank the corpora curators: Airi Kapanen, Alan Cruttenden, Alison Henry, Aliyah Morgenstern, Amy Strekas, Amye Warren-Leubecker, Ana Isabel Ojea Lopez, Ana Lúcia Santos, Ana Maria Guimarães, Andrea Biró, Andrea Feldman, Angela Grimm, Ann Peters, Anna Chromá, Anna Theakston, Anne Van Kleeck, Anne-Marie Schaerlaekens, Annick De Houwer, Antje van Oosten, Aparna Nadig, Astrid Klammler, Aurora Bel Gaya, Aviya Hacohen, Ayhan Aksu Koç, Barbara Davis, Barbara Pearson, Bernadette Plunkett, Bernd Möbius, Bob Jones, Bob Wilson, Brian MacWhinney, Britta Lintfert, Carina Koroschetz, Carmen Silva-Corvalán, Caroline Rowland, Catherine Snow, Cécile De Cat, Charles Watkins, Chiara Roggero, Chien-ju Chang, Christian Champaud, Christiane von Stutterheim, Christina Gildersleeve-Neumann, Christine Howe, Claartje Levelt, Claudine Hammelrath, Colleen Huebner Morisset, Conxita Lleo, Conxita Lleó, Cornelia Hamann, Darinka Anđelković, David Dickinson, David Gil, Dmitar Popov, Donella Antelmi, Donna Jackson-Maldonado, Donna Thal, Dorit Ravid, Eithne Guilfoyle, Ekaterina Protassova, Elena Lieven, Elisabet Serrat Sellabona, Eliseo Diez-Itza, Elizabeth Bates, Elizabeth Nixon, Eon-Suk Ko, Eva Bar-Shalom, Eve Clark, Evelien Krikhaar, Feyza Altinkamis, Filip Smolik, Folkert Kuiken, Francisco De Lacerda, Frank Wijnen, Fred Genesee, Frenette Southwood, Gaja Jarosz, Gerard Bol, Gerardo Aguado Alonso, Ghada Khattab, Gina Conti-Ramsden, Gisela Szagun, Giuseppe Cappelli, Gordana Hržica, Gordon Wells, Habibeh Samadi, Hanna Batoréo, Hannah Sarvasy, Harriet Jisa, Heather Goad, Heba Salama, Heidi Feldman, Heike Behrens, Helen Körgesaar, Hervé Hunkeler, Hintat Cheung, Hiro Yuki Nisisawa, Hrafnhildur Ragnarsdóttir, Hye-Ree Ghim, Igor Žagar, Iliana Reyes, Inge Zink, Ioana Goga, Isabelle Barrière, Isabelle Maillochon, Jacqueline Sachs, Jacqueline van Kampen, Jane Herbert, Jane S. Tsay, Janet Bang, Jan Edwards, Javier Aguado Orea, Jean Berko Gleason, Jean Quigley, Jean-Adolphe Rondal, Jeannine Goh, Jeroen Aarssen, Jing Zhou, Jody Tommerdahl, Joe Pater, Johanna Nicholas, Jóhanna Thelma Einarsdóttir, Johanne Paradis, John Neil Bohannon III, Jordan Zlatev, José L. Linaza, Ju-Yeon Ryu, Judit Navracsics, Julian Pine, Julie Brittain, Julie McMillan, Jürgen Weissenborn, Juana Liceras, Kaja Kohler, Karina Hess Zimmermann, Karme Beek, Katerina Palasis, Katherine Demuth, Katherine Nelson, Kathy Post, Keith Sawyer, Kim Plunkett, Klaus Wagner, Klára Matiasovitsová, L. Haggerty, Laetitia de Almeida, Larisa Avram, Larry F. Guthrie, Leonor Scliar-Cabral, Liliana Tolchinsky, Linda Kelly, Linhui Li, Lise Menn, Livia Tonelli, Lois Bloom, Lori Van Houten, Lorraine McCune, Lynn S. Bliss, Madalena Cruz-Ferreira, Madeleine Leveillé, Magda Krupa-Kwiatkowska, Magdalena Smoczynska, Maigi Vija, Maja Roch, Manuela Wagner, Marc Bornstein, Margaret Deuchar, Maria del Carmen Aguirre Martínez, Maria Emma Ticio, María Jesús Pérez-Bazán, Maria João Freitas, Maria-Llanos Luque Sánchez, Marie-Thérèse Le Normand, Mariko Hayashi, Marilyn Vihman, Marta Fernández Vázquez, Martha Shiro, Marty Demetras, Mary Ann Evans, Mary Beckman, Mary Erbaugh, Masayuki Yokoyama, Mats Andrén, Max Miller, Megan Devlin, Melanie Soderstrom, Melissa Redford, Melita Kovacevic, Michael Brent, Michael Forrester, Michelle McGillion, Michelle White, Milagros Fernández Pérez, Miquel Serra, Mirco Fasolo, Mireas Llinas, Mireia Llinàs-Grau, Mitsuhiko Ota, Mohamed Lahrouchi, Monique Vion, Myron Korman, Nan Bernstein Ratner, Naomi Hamasaki, Naomi Yamaguchi, Natalia Gagarina, Neil Smith, Neiloufar Family, Nina Gram Garmann, Níria Esteve-Gibert, Norio Naka, Núria Esteve-Gibert, Oksana Bailleul, Ondene Van Dulm, Oralia Rodríguez Arredondo, Outi Bat-El, Pamela Rollins, Patrick Suppes, Paul Fletcher, Paula Fikkert, Péter Bodor, Petra Bos, Petra Hendriks, Petra Sleeman, Pilar Prieto, Rangaswamy Narasimhan, Raquel Fernández Fuertes, Rebecca Burns, Reili Argus, Richard Sprott, Richard Weist, Roberto Soto Valle, Roger Brown, Ron Gillam, Rosa Graciela Montes, Roy Higginson, Ruth Berman, Sam Leung, Sanne Kuijper, Seba Al-Hindawy, Shaima AlQattan, Sharon Inkelas, Silvia Nieva, Silvia Romero Contreras, Sirli Zupping, Sophie Kern, Sotaro Kita, Stan Kuczaj, Stephen Matthews, Steven Gillis, Sudaporn Luksaneeyanawin, Susan Ellis Weismer, Susan Gelman, Susan R. Braunwald, Susana Correia, Susana López Ornat, Susanne Miyata, Sven Strömqvist, Takeo Ishii, Tamirand De Lisser, Tania Ionin, Teresa da Costa, Thea Cameron-Faulkner, Thomas Doukas, Thomas Lee, Tina Ringstad, Twila Tardif, Ursula Stephany, Valentin Remedi, Victoria Marrero, Virginia C. Gathercole, Virginia Gathercole, Virginia Valian, Virginia Yip, William Hall, William Snyder, Xiangjun Deng, Yasuhiro Shirai, Yonata Levy, Yoshiki Ogawa, Yow Wei Quin, Yvan Rose, Zhang Yibin.


## Package and environment version

```{r}

sessionInfo()
```



